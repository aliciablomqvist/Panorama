@page
@model PanoramaApp.Pages.MovieLists.ViewMovieListsModel
@{
    ViewData["Title"] = "My Movie Lists";
}

<h2>My Movie Lists</h2>

@if (Model.MovieLists.Any())
{
    <table class="table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Movies</th>
                <th>Shared With</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var list in Model.MovieLists)
            {
                <tr>
                    <td>@list.Name</td>
                    <td>@list.Description</td>
                    <td>
                        @foreach (var movie in list.Movies)
                        {
                            <div>@movie.Movie?.Title</div>
                        }
                    </td>
                    <td>
                        @foreach (var group in list.SharedWithGroups)
                        {
                            <div>@group.Name</div>
                        }
                    </td>
                    <td>
                        <a class="btn btn-primary" asp-page="/MovieLists/MovieListDetails" asp-route-id="@list.Id">View</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p>No movie lists found. Create one now!</p>
    <a asp-page="/MovieLists/Create" class="btn btn-success">Create Movie List</a>
}

<h2>My Groups</h2>

@if (Model.Groups.Any())
{
    <ul>
        @foreach (var group in Model.Groups)
        {
            <li>
                @group.Name
                <a asp-page="/Groups/Details" asp-route-id="@group.Id" class="btn btn-link">View</a>
            </li>
        }
    </ul>
}
else
{
    <p>You are not a member of any groups.</p>
}
